<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Multi-company rules -->
        <record id="warehouse_comp_rule" model="ir.rule">
            <field name="name">Warehouse multi-company</field>
            <field name="model_id" ref="stock.model_stock_warehouse"/>
            <field name="global" eval="True"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
        </record>

        <record id="sale_order_comp_rule" model="ir.rule">
            <field name="name">Sale Order multi-company</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="global" eval="True"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
        </record>

        <record id="stock_picking_comp_rule" model="ir.rule">
            <field name="name">Stock Picking multi-company</field>
            <field name="model_id" ref="stock.model_stock_picking"/>
            <field name="global" eval="True"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
        </record>

        <!-- Website-specific rules -->
        <record id="warehouse_website_rule" model="ir.rule">
            <field name="name">Warehouse per website</field>
            <field name="model_id" ref="stock.model_stock_warehouse"/>
            <!-- In Odoo 17, we can't use context in record rules directly -->
            <field name="domain_force">['|', ('website_ids', '=', False), ('website_ids', 'in', [1])]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>
    </data>
</odoo>